<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>그녀를 위한 완-벽한 제주 맛집 가이드 (진짜 최종본)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Jeju Love Letter -->
    <!-- Application Structure Plan: 사용자의 여행 계획 수립을 돕기 위해 기능별로 탭을 분리한 대시보드형 SPA입니다. 1) '맛집 탐색': 필터링 가능한 카드 뷰로 전체 리스트를 자유롭게 탐색합니다. 2) '카테고리별 비교': 흑돼지, 해산물 등 동일 카테고리 맛집들을 표로 비교하여 메뉴 선택을 돕습니다. 3) '지도에서 위치 보기': 제주도 지도 위에 모든 맛집의 위치를 시각적으로 표시하여 동선 계획을 용이하게 합니다. 4) '우리의 맛집 취향': 선택된 맛집들의 데이터를 차트로 분석하여 우리의 여행 스타일을 재미있게 파악할 수 있도록 합니다. 이 구조는 방대한 정보를 사용자가 목적에 맞게 효율적으로 활용하여, 여자친구와 함께 즐겁게 여행 계획을 세울 수 있도록 설계되었습니다. -->
    <!-- Visualization & Content Choices: 각 맛집 정보는 사진을 포함한 카드 형태로 제공하며, 클릭 시 영업시간, 주소 등 상세 정보가 담긴 모달창이 나타납니다(목표: 정보 제공). 카테고리(흑돼지, 해산물, 분식, 한식)와 지역별 동적 필터링 기능을 구현했습니다(목표: 탐색/정리). 카테고리별 핵심 정보를 정렬 가능한 HTML 표로 만들어 직접적인 비교를 용이하게 했습니다(목표: 비교). 맛집 카테고리 분포(파이 차트), 지역별 분포(막대 차트)를 Chart.js로 시각화하여 데이터 기반의 빠른 이해를 돕습니다(목표: 정보). 제주 지도 이미지 위에 각 맛집의 위치를 아이콘으로 표시하여 직관적인 동선 파악을 가능하게 했습니다. 모든 시각적 요소는 칭찬받고 싶은 사용자의 목표 달성을 위해, 쉽고 아름답고 유용하게 설계되었습니다. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #FEFBF6;
            color: #7F5539;
        }
        .nav-item {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-item.active, .nav-item:hover {
            color: #B08968;
            border-bottom-color: #B08968;
        }
        .filter-btn {
            transition: all 0.2s ease-in-out;
        }
        .filter-btn.active {
            background-color: #9C6644;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .modal-overlay { transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s ease; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 350px; max-height: 400px; }
        }
        .map-marker {
            position: absolute;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: transform 0.2s ease;
            font-size: 1.75rem;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3));
        }
        .map-marker:hover {
            transform: translate(-50%, -50%) scale(1.5);
            z-index: 10;
        }
        .map-marker-label {
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.75);
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 13px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.2s ease;
            pointer-events: none;
        }
        .map-marker:hover .map-marker-label {
            opacity: 1;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-[#7F5539] mb-2">To. My Girlfriend ❤️</h1>
            <p class="text-lg text-gray-600">우리가 함께 갈 제주 맛집들, 내가 다 정리했어!</p>
        </header>

        <nav class="flex justify-center border-b border-yellow-800/20 mb-8 space-x-2 sm:space-x-4 md:space-x-8">
            <button class="nav-item py-4 px-2 md:px-4 text-sm md:text-base font-medium text-gray-500 active" data-view="explore">맛집 탐색</button>
            <button class="nav-item py-4 px-2 md:px-4 text-sm md:text-base font-medium text-gray-500" data-view="compare">카테고리별 비교</button>
            <button class="nav-item py-4 px-2 md:px-4 text-sm md:text-base font-medium text-gray-500" data-view="map">지도에서 위치 보기</button>
            <button class="nav-item py-4 px-2 md:px-4 text-sm md:text-base font-medium text-gray-500" data-view="insights">우리의 맛집 취향</button>
        </nav>

        <main>
            <section id="explore-view">
                <div class="bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-sm mb-8">
                    <p class="text-gray-700 text-center leading-relaxed">
                        네가 가고 싶다고 했던 제주 맛집 리스트야! 우리가 뭘 먹으면 가장 행복할지, 어디부터 가면 좋을지 쉽게 볼 수 있도록 정리해봤어. 아래 필터로 편하게 찾아보고, 카드를 눌러서 자세한 정보도 확인해봐.
                    </p>
                </div>
                <div id="filters" class="mb-8 space-y-6">
                    <div>
                        <h3 class="font-semibold mb-3 text-lg text-gray-700"># 음식 종류</h3>
                        <div class="flex flex-wrap gap-2">
                            <button class="filter-btn category-btn border border-gray-300 px-4 py-2 rounded-full text-gray-700 active" data-category="all">전체보기</button>
                            <button class="filter-btn category-btn border border-gray-300 px-4 py-2 rounded-full text-gray-700" data-category="흑돼지">🍖 흑돼지</button>
                            <button class="filter-btn category-btn border border-gray-300 px-4 py-2 rounded-full text-gray-700" data-category="해산물">🦞 해산물</button>
                            <button class="filter-btn category-btn border border-gray-300 px-4 py-2 rounded-full text-gray-700" data-category="한식/해장국">🍲 한식&해장국</button>
                            <button class="filter-btn category-btn border border-gray-300 px-4 py-2 rounded-full text-gray-700" data-category="분식/기타">🍙 분식&기타</button>
                        </div>
                    </div>
                </div>
                <div id="spot-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
                <p id="no-results" class="text-center text-gray-500 py-12 hidden">선택한 조건에 맞는 맛집이 없어!</p>
            </section>
            
            <section id="compare-view" class="hidden">
                 <div class="bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-sm mb-8">
                     <p class="text-gray-700 text-center leading-relaxed">
                        "흑돼지는 어디가 좋을까?", "고등어회는 여기가 괜찮을까?" 고민될 때 여기를 봐! 음식 종류별로 맛집들을 모아놨어. 대표 메뉴랑 가격, 한줄평을 비교해보면서 우리한테 딱 맞는 곳을 골라보자.
                    </p>
                </div>
                <div id="compare-tables" class="space-y-12"></div>
            </section>
            
            <section id="map-view" class="hidden">
                <div class="bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-sm mb-8">
                     <p class="text-gray-700 text-center leading-relaxed">
                        우리가 갈 맛집들이 제주도 어디에 있는지 지도에 표시해봤어. 이걸로 여행 동선 짜면 정말 편할거야! 아이콘에 마우스를 올리면 이름이 보이고, 클릭하면 자세한 정보가 나와.
                    </p>
                </div>
                <div id="map-container" class="relative w-full max-w-4xl mx-auto">
                    <img src="https://i.imgur.com/sC3dC2F.png" alt="제주도 지도" class="w-full h-auto rounded-lg shadow-lg">
                    <div id="map-markers"></div>
                </div>
            </section>

            <section id="insights-view" class="hidden">
                 <div class="bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-sm mb-8">
                     <p class="text-gray-700 text-center leading-relaxed">
                        우리가 고른 맛집들을 보니까 우리의 취향이 보이네! 어떤 종류의 음식을 가장 좋아하는지, 어느 지역에 많이 가고 싶어하는지 차트로 만들어봤어. 재미로 한번 봐봐!
                    </p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <h3 class="text-xl font-semibold text-center mb-4">우리의 맛집 카테고리</h3>
                        <div class="chart-container">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <h3 class="text-xl font-semibold text-center mb-4">선호 지역 분포</h3>
                        <div class="chart-container">
                            <canvas id="regionChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none">
        <div class="modal-content bg-white w-full max-w-2xl max-h-[90vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col transform scale-95">
            <div id="modal-header" class="p-5 border-b flex justify-between items-center bg-gray-50">
                <h2 id="modal-title" class="text-2xl font-bold text-[#7F5539]"></h2>
                <button id="modal-close-btn" class="text-gray-400 hover:text-gray-700 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div id="modal-body" class="p-6 md:p-8 overflow-y-auto space-y-6 text-gray-700 leading-relaxed"></div>
        </div>
    </div>

    <script>
        const restaurantData = [
            // 분식/기타
            { id: 1, name: "아라찐빵", category: "분식/기타", region: "북부", menu: "찐빵, 꽈배기", price: "1만원 미만", review: "촉촉하고 부드러운 찐빵의 정석. 옛날 감성 그대로, 현지인 추천 맛집.", hours: "09:00 - 18:00 (재료 소진 시 마감)", address: "제주시 인다1길 12", photo: "https://source.unsplash.com/600x400/?korean,steamed,bun", map: {x: '42%', y: '30%'}, icon: '🥟'},
            { id: 2, name: "오는정김밥", category: "분식/기타", region: "남부", menu: "오는정김밥", price: "1만원 미만", review: "튀긴 유부가 신의 한 수! 예약 없이는 절대 맛볼 수 없는 제주의 명물 김밥.", hours: "10:00 - 20:00 (전화 예약 필수)", address: "서귀포시 동문동로 2", photo: "https://source.unsplash.com/600x400/?gimbap,korean,food", map: {x: '55%', y: '89%'}, icon: '🍙'},
            { id: 3, name: "명랑스낵", category: "분식/기타", region: "서부", menu: "흑돼지튀김, 떡볶이", price: "1~2만원대", review: "협재해변 뷰와 함께 즐기는 분식. 바삭한 흑돼지튀김과 맥주는 환상의 조합.", hours: "11:30 - 19:30 (브레이크타임 있음)", address: "제주시 한림읍 한림로 1480", photo: "https://source.unsplash.com/600x400/?tteokbokki,fried,pork", map: {x: '15%', y: '45%'}, icon: '🍤'},
            { id: 4, name: "제주시새우리", category: "분식/기타", region: "북부", menu: "딱새우김밥", price: "1만원 미만", review: "통통한 딱새우튀김이 통째로! 공항 근처라 포장해서 여행 시작하기 좋음.", hours: "09:00 - 20:30", address: "제주시 무근성7길 24", photo: "https://source.unsplash.com/600x400/?shrimp,gimbap", map: {x: '38%', y: '22%'}, icon: '🦐'},

            // 해산물
            { id: 5, name: "풀베개", category: "해산물", region: "남부", menu: "통갈치구이", price: "10만원 이상 (2인)", review: "압도적인 비주얼의 통갈치구이. 살이 부드럽고 가시 바르기 편해서 좋음.", hours: "10:00 - 21:00", address: "서귀포시 일주서로 982", photo: "https://source.unsplash.com/600x400/?grilled,fish,korean", map: {x: '35%', y: '85%'}, icon: '🐟'},
            { id: 6, name: "점점", category: "해산물", region: "서부", menu: "해물라면", price: "1~2만원대", review: "돌문어가 통째로 들어간 비주얼 끝판왕 라면. 국물이 시원하고 칼칼함.", hours: "09:00 - 18:00 (재료 소진 시 마감)", address: "제주시 한경면 판포1길 2", photo: "https://source.unsplash.com/600x400/?seafood,ramen,octopus", map: {x: '8%', y: '50%'}, icon: '🐙'},
            { id: 7, name: "상상 함덕점", category: "해산물", region: "북부", menu: "해물라면, 흑돼지돈까스", price: "1~2만원대", review: "함덕해변 바로 앞 오션뷰 맛집. 문어 한마리가 통째로 들어간 라면이 인기.", hours: "08:30 - 21:00", address: "제주시 조천읍 조함해안로 525", photo: "https://source.unsplash.com/600x400/?jeju,seafood,ramen", map: {x: '55%', y: '20%'}, icon: '🦀'},
            { id: 8, name: "미영이네 조천점", category: "해산물", region: "북부", menu: "고등어회", price: "5~7만원대", review: "본점의 명성 그대로! 비린맛 없이 신선하고 고소한 고등어회를 맛볼 수 있음.", hours: "16:00 - 22:00", address: "제주시 조천읍 함와로 510", photo: "https://source.unsplash.com/600x400/?mackerel,sashimi", map: {x: '58%', y: '25%'}, icon: '🐠'},
            { id: 9, name: "만선바다", category: "해산물", region: "동부", menu: "통갈치조림, 해물전골", price: "7~10만원대", review: "푸짐한 해물과 갈치가 들어간 조림이 일품. 밥도둑이 따로 없음.", hours: "10:00 - 22:00", address: "서귀포시 성산읍 일출로 250", photo: "https://source.unsplash.com/600x400/?braised,fish,korean,stew", map: {x: '92%', y: '60%'}, icon: '🥘'},
            { id: 10, name: "스시마씸 월정", category: "해산물", region: "동부", menu: "제주바다스시", price: "2~4만원대", review: "월정리 바다를 보며 즐기는 스시. 제주 특산물로 만든 초밥이 특별함.", hours: "11:30 - 21:00", address: "제주시 구좌읍 월정1길 72-1", photo: "https://source.unsplash.com/600x400/?sushi,platter", map: {x: '75%', y: '22%'}, icon: '🍣'},
            { id: 11, name: "소금바치 순이네", category: "해산물", region: "동부", menu: "돌문어볶음", price: "3~4만원대", review: "매콤달콤한 양념의 돌문어볶음이 중독성 강함. 밥 비벼 먹으면 최고.", hours: "11:00 - 21:00 (목요일 휴무)", address: "제주시 구좌읍 종달로 100", photo: "https://source.unsplash.com/600x400/?stir-fried,octopus,korean", map: {x: '88%', y: '28%'}, icon: '🌶️'},
            { id: 12, name: "곰만식당", category: "해산물", region: "남부", menu: "갈치조림, 성게미역국", price: "3~5만원대", review: "현지인들이 많이 찾는 갈치조림 맛집. 가성비 좋고 맛도 훌륭함.", hours: "08:00 - 21:00", address: "서귀포시 중정로 53", photo: "https://source.unsplash.com/600x400/?korean,fish,stew", map: {x: '54%', y: '90%'}, icon: '🍲'},
            { id: 13, name: "김녕오라이", category: "해산물", region: "동부", menu: "핑크뮬리크림우동", price: "1~2만원대", review: "김녕해수욕장 근처 감성 맛집. 비주얼도 예쁘고 맛도 좋은 퓨전 요리.", hours: "11:00 - 21:00", address: "제주시 구좌읍 김녕로21길 23", photo: "https://source.unsplash.com/600x400/?cream,udon,pasta", map: {x: '68%', y: '18%'}, icon: '🍝'},
            { id: 14, name: "명진전복", category: "해산물", region: "동부", menu: "전복돌솥밥", price: "1~2만원대", review: "제주 전복돌솥밥의 원조. 고소한 내장밥과 전복의 조화가 환상적.", hours: "09:30 - 21:30 (화요일 휴무)", address: "제주시 구좌읍 해맞이해안로 1282", photo: "https://source.unsplash.com/600x400/?abalone,rice,korean", map: {x: '80%', y: '25%'}, icon: '🍚'},
            { id: 15, name: "금자매식당", category: "해산물", region: "동부", menu: "갈치조림, 전복뚝배기", price: "2~4만원대", review: "성산일출봉 근처 가성비 맛집. 푸짐하고 맛있는 제주 가정식 백반.", hours: "07:00 - 21:00", address: "서귀포시 성산읍 성산중앙로 40", photo: "https://source.unsplash.com/600x400/?korean,seafood,stew", map: {x: '94%', y: '55%'}, icon: '🍳'},
            { id: 16, name: "순청미향 제주산방산본점", category: "해산물", region: "남부", menu: "통갈치조림", price: "7~10만원대", review: "산방산 뷰를 보며 즐기는 통갈치조림. 다양한 곁들임 반찬도 훌륭함.", hours: "10:00 - 20:30", address: "서귀포시 안덕면 사계남로 224", photo: "https://source.unsplash.com/600x400/?korean,braised,cutlassfish", map: {x: '28%', y: '88%'}, icon: '⛰️'},
            { id: 17, name: "미영이네", category: "해산물", region: "남부", menu: "고등어회", price: "5~7만원대", review: "고등어회의 성지. 비린맛 1도 없는 신선함의 극치. 웨이팅 감수할 가치 있음.", hours: "11:30 - 22:00", address: "서귀포시 대정읍 하모항구로 42", photo: "https://source.unsplash.com/600x400/?mackerel,sashimi,korean", map: {x: '15%', y: '88%'}, icon: '✨'},
            { id: 18, name: "번네식당", category: "해산물", region: "남부", menu: "갈치조림, 옥돔구이", price: "3~5만원대", review: "서귀포 올레시장 근처 현지인 맛집. 진하고 칼칼한 갈치조림이 일품.", hours: "09:00 - 21:00", address: "서귀포시 중앙로79번길 5", photo: "https://source.unsplash.com/600x400/?grilled,tilefish", map: {x: '56%', y: '91%'}, icon: '🔥'},
            { id: 19, name: "조천수산", category: "해산물", region: "북부", menu: "모듬회", price: "싯가", review: "가성비 최고의 횟집. 포장 전문으로 신선한 회를 저렴하게 즐길 수 있음.", hours: "10:00 - 20:00", address: "제주시 조천읍 신북로 231", photo: "https://source.unsplash.com/600x400/?sashimi,platter,korean", map: {x: '54%', y: '22%'}, icon: '🎏'},
            { id: 20, name: "제주선채향", category: "해산물", region: "남부", menu: "통갈치 한상차림", price: "7~10만원대", review: "압도적인 비주얼의 통갈치 한상차림. 해산물과 곁들임 반찬이 다양해 상다리가 휠 정도.", hours: "10:30 - 21:30", address: "서귀포시 천제연로 119", photo: "https://source.unsplash.com/600x400/?korean,food,banchan", map: {x: '38%', y: '87%'}, icon: '🌊'},

            // 흑돼지
            { id: 21, name: "송당회관", category: "흑돼지", region: "동부", menu: "흑돼지 두루치기", price: "1~2만원대", review: "가성비 넘치는 흑돼지 두루치기 맛집. 볶음밥은 선택이 아닌 필수.", hours: "10:00 - 20:00", address: "제주시 구좌읍 중산간동로 2253", photo: "https://source.unsplash.com/600x400/?korean,spicy,pork,stir-fry", map: {x: '73%', y: '42%'}, icon: '🐷'},
            { id: 22, name: "깡촌흑돼지 함덕본점", category: "흑돼지", region: "북부", menu: "흑돼지 근고기", price: "5~7만원대", review: "초벌구이 해서 나와 육즙이 살아있음. 멜젓과의 조화가 훌륭함.", hours: "12:00 - 22:00", address: "제주시 조천읍 신북로 493", photo: "https://source.unsplash.com/600x400/?korean,bbq,pork", map: {x: '56%', y: '21%'}, icon: '🐖'},
            { id: 23, name: "탑부평 본전", category: "흑돼지", region: "남부", menu: "흑돼지 오겹살", price: "4~6만원대", review: "서귀포 현지인들이 사랑하는 찐맛집. 두툼한 고기와 친절한 서비스.", hours: "16:00 - 22:00", address: "서귀포시 부두로 21", photo: "https://source.unsplash.com/600x400/?korean,pork,belly", map: {x: '57%', y: '92%'}, icon: '🖤'},
            { id: 24, name: "직구고", category: "흑돼지", region: "북부", menu: "흑돼지 직구세트", price: "5~7만원대", review: "직접 다 구워주셔서 편하게 먹을 수 있음. 고기 퀄리티가 매우 좋음.", hours: "16:00 - 23:00", address: "제주시 연동12길 11", photo: "https://source.unsplash.com/600x400/?korean,barbecue,pork", map: {x: '35%', y: '26%'}, icon: '👨‍🍳'},
            { id: 25, name: "금돗 성산흑돼지", category: "흑돼지", region: "동부", menu: "흑돼지 근고기", price: "5~7만원대", review: "성산일출봉 근처 뷰 좋은 흑돼지집. 고기가 신선하고 두툼함.", hours: "12:00 - 22:00", address: "서귀포시 성산읍 일출로 266", photo: "https://source.unsplash.com/600x400/?jeju,black,pork", map: {x: '93%', y: '58%'}, icon: '🌅'},
            { id: 26, name: "오직흑돼지 제주공항본점", category: "흑돼지", region: "북부", menu: "흑돼지 오겹살", price: "4~6만원대", review: "공항에서 가까워 여행 시작/마무리 식사로 좋음. 깔끔하고 맛도 준수.", hours: "11:30 - 22:00", address: "제주시 월랑로 56", photo: "https://source.unsplash.com/600x400/?grilled,pork,belly", map: {x: '33%', y: '24%'}, icon: '✈️'},
            { id: 27, name: "꽃돼지연탄구이", category: "흑돼지", region: "북부", menu: "흑돼지 근고기", price: "5~7만원대", review: "연탄불에 구워 불향 가득. 노포 감성으로 술 한잔하기 좋은 분위기.", hours: "16:00 - 24:00", address: "제주시 관덕로15길 25", photo: "https://source.unsplash.com/600x400/?charcoal,grilled,pork", map: {x: '37%', y: '23%'}, icon: '🌸'},
            { id: 28, name: "칠돈가 본점", category: "흑돼지", region: "북부", menu: "흑돼지 근고기", price: "5~7만원대", review: "제주 흑돼지 근고기의 대표주자. 두툼한 고기와 멜젓의 원조격.", hours: "13:00 - 22:30", address: "제주시 서사로 11", photo: "https://source.unsplash.com/600x400/?thick,pork,belly,korean", map: {x: '36%', y: '24%'}, icon: '7️⃣'},
            { id: 29, name: "칠돈가 중문점", category: "흑돼지", region: "남부", menu: "흑돼지 근고기", price: "5~7만원대", review: "본점의 맛을 중문에서도! 관광객 접근성이 좋고 맛도 훌륭함.", hours: "12:00 - 22:00", address: "서귀포시 천제연로 137", photo: "https://source.unsplash.com/600x400/?jeju,bbq,pork", map: {x: '37%', y: '86%'}, icon: '💯'},
            { id: 30, name: "숙성도 애월점", category: "흑돼지", region: "서부", menu: "교차숙성 흑돼지", price: "6~8만원대", review: "인생 흑돼지를 만날 수 있는 곳. 웨이팅은 길지만 후회 없는 맛.", hours: "12:00 - 22:00", address: "제주시 애월읍 애월북서길 54", photo: "https://source.unsplash.com/600x400/?aged,pork,korean,bbq", map: {x: '24%', y: '26%'}, icon: '👑'},
            { id: 31, name: "숙성도 중문점", category: "흑돼지", region: "남부", menu: "교차숙성 흑돼지", price: "6~8만원대", review: "최고의 흑돼지를 중문에서. 테이블링 앱 원격 줄서기 필수.", hours: "12:00 - 22:00", address: "서귀포시 일주서로 966", photo: "https://source.unsplash.com/600x400/?korean,aged,pork,grill", map: {x: '36%', y: '84%'}, icon: '🏆'},
            { id: 32, name: "숙성도 제주본점", category: "흑돼지", region: "북부", menu: "교차숙성 흑돼지", price: "6~8만원대", review: "명불허전 숙성도의 시작. 극강의 부드러움과 육즙을 경험할 수 있음.", hours: "12:00 - 22:00", address: "제주시 원노형로 41", photo: "https://source.unsplash.com/600x400/?fine,dining,pork,bbq", map: {x: '34%', y: '27%'}, icon: '🥇'},
            { id: 33, name: "숙성도 함덕점", category: "흑돼지", region: "북부", menu: "교차숙성 흑돼지", price: "6~8만원대", review: "함덕해변 근처에서 즐기는 최고의 흑돼지. 오션뷰는 덤.", hours: "12:00 - 22:00", address: "제주시 조천읍 조함해안로 514", photo: "https://source.unsplash.com/600x400/?pork,bbq,beach,view", map: {x: '55%', y: '19%'}, icon: '🌊'},

            // 한식/해장국
            { id: 34, name: "모다정", category: "한식/해장국", region: "남부", menu: "전복두루치기", price: "3~5만원대", review: "전복, 흑돼지, 딱새우가 들어간 매콤한 두루치기. 볶음밥 필수.", hours: "09:00 - 21:00", address: "서귀포시 이어도로 1021", photo: "https://source.unsplash.com/600x400/?korean,spicy,pork,abalone", map: {x: '45%', y: '88%'}, icon: '❤️'},
            { id: 35, name: "산지해장국 성산점", category: "한식/해장국", region: "동부", menu: "소고기해장국", price: "1만원 미만", review: "제주식 해장국의 정석. 시원하고 칼칼한 국물이 일품. 아침식사로 최고.", hours: "06:00 - 15:00", address: "서귀포시 성산읍 고성리 1146-2", photo: "https://source.unsplash.com/600x400/?haejangguk,korean,hangover,soup", map: {x: '90%', y: '57%'}, icon: '☀️'},
            { id: 36, name: "우진해장국", category: "한식/해장국", region: "북부", menu: "고사리육개장", price: "1만원 내외", review: "걸쭉한 비주얼에 놀라고 깊은 맛에 두 번 놀람. 제주에서만 맛볼 수 있는 별미.", hours: "06:00 - 22:00", address: "제주시 서사로 11", photo: "https://source.unsplash.com/600x400/?yukgaejang,korean,spicy,beef,soup", map: {x: '38%', y: '23%'}, icon: '🍵'},
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const appState = { currentView: 'explore', filters: { category: 'all' } };
            const views = {
                explore: document.getElementById('explore-view'),
                compare: document.getElementById('compare-view'),
                map: document.getElementById('map-view'),
                insights: document.getElementById('insights-view')
            };
            const grid = document.getElementById('spot-grid'), noResults = document.getElementById('no-results');
            const modal = document.getElementById('modal'), modalTitle = document.getElementById('modal-title'), modalBody = document.getElementById('modal-body');

            const renderCards = () => {
                grid.innerHTML = '';
                const filteredData = restaurantData.filter(d => appState.filters.category === 'all' || d.category === appState.filters.category);
                noResults.classList.toggle('hidden', filteredData.length > 0);
                filteredData.forEach(d => {
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-xl shadow-lg overflow-hidden transform hover:-translate-y-1 transition-transform duration-300 cursor-pointer flex flex-col';
                    card.dataset.id = d.id;
                    card.innerHTML = `
                        <img class="h-40 w-full object-cover" src="${d.photo}" alt="${d.name}" onerror="this.onerror=null;this.src='https://placehold.co/600x400/FEFBF6/7F5539?text=${encodeURIComponent(d.name)}';">
                        <div class="p-4 flex flex-col flex-grow">
                            <div class="flex justify-between items-start">
                                <h3 class="text-lg font-bold text-gray-800">${d.icon} ${d.name}</h3>
                                <span class="text-sm font-semibold bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">${d.region}</span>
                            </div>
                            <p class="text-gray-600 mt-1 text-sm">대표: ${d.menu}</p>
                            <div class="mt-3 bg-gray-50 p-2 rounded-lg flex-grow">
                                <p class="text-xs text-gray-700">💬 "${d.review}"</p>
                            </div>
                        </div>`;
                    card.addEventListener('click', () => openModal(d.id));
                    grid.appendChild(card);
                });
            };

            const openModal = (id) => {
                const spot = restaurantData.find(d => d.id == id);
                modalTitle.innerHTML = `${spot.icon} ${spot.name}`;
                modalBody.innerHTML = `
                    <img class="h-60 w-full object-cover rounded-lg" src="${spot.photo}" alt="${spot.name}" onerror="this.onerror=null;this.src='https://placehold.co/600x400/FEFBF6/7F5539?text=${encodeURIComponent(spot.name)}';">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6">
                        <div class="bg-amber-50 p-3 rounded-lg"><span class="font-semibold text-amber-800">대표 메뉴:</span> ${spot.menu}</div>
                        <div class="bg-red-50 p-3 rounded-lg"><span class="font-semibold text-red-800">가격대:</span> ${spot.price}</div>
                        <div class="bg-blue-50 p-3 rounded-lg col-span-1 sm:col-span-2"><span class="font-semibold text-blue-800">위치:</span> ${spot.address}</div>
                        <div class="bg-green-50 p-3 rounded-lg col-span-1 sm:col-span-2"><span class="font-semibold text-green-800">영업 시간:</span> ${spot.hours}</div>
                    </div>
                    <div class="mt-4 bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-bold text-lg text-gray-800 mb-2">❤️ 한줄평</h4>
                        <p>"${spot.review}"</p>
                    </div>`;
                modal.classList.remove('opacity-0', 'pointer-events-none');
                modal.querySelector('.modal-content').classList.remove('scale-95');
            };

            const closeModal = () => {
                modal.classList.add('opacity-0');
                modal.querySelector('.modal-content').classList.add('scale-95');
                setTimeout(() => modal.classList.add('pointer-events-none'), 300);
            };

            const switchView = (viewName) => {
                appState.currentView = viewName;
                Object.values(views).forEach(v => v.classList.add('hidden'));
                views[viewName].classList.remove('hidden');
                document.querySelectorAll('.nav-item').forEach(item => item.classList.toggle('active', item.dataset.view === viewName));
                if (viewName === 'insights') renderCharts();
                if (viewName === 'map') renderMap();
                if (viewName === 'compare') renderCompareTables();
            };

            const renderCompareTables = () => {
                const container = document.getElementById('compare-tables');
                container.innerHTML = '';
                const categories = ['흑돼지', '해산물', '한식/해장국', '분식/기타'];
                const headers = [ {key: 'name', label: '이름'}, {key: 'menu', label: '대표 메뉴'}, {key: 'price', label: '가격대'}, {key: 'review', label: '한줄평'} ];
                categories.forEach(cat => {
                    const data = restaurantData.filter(d => d.category === cat);
                    if (data.length === 0) return;
                    const table = `
                        <h3 class="text-2xl font-bold mb-4 text-[#9C6644]">${data.length > 0 ? data[0].icon : ''} ${cat} 비교</h3>
                        <div class="overflow-x-auto bg-white rounded-lg shadow">
                            <table class="w-full text-sm text-left text-gray-500">
                                <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                    <tr>${headers.map(h => `<th scope="col" class="px-6 py-3">${h.label}</th>`).join('')}</tr>
                                </thead>
                                <tbody>
                                    ${data.map(d => `
                                        <tr class="bg-white border-b hover:bg-gray-50">
                                            <td class="px-6 py-4 font-medium text-gray-900">${d.name}</td>
                                            <td class="px-6 py-4">${d.menu}</td>
                                            <td class="px-6 py-4">${d.price}</td>
                                            <td class="px-6 py-4 text-xs">"${d.review}"</td>
                                        </tr>`).join('')}
                                </tbody>
                            </table>
                        </div>`;
                    container.innerHTML += table;
                });
            };
            
            const renderMap = () => {
                const container = document.getElementById('map-markers');
                container.innerHTML = '';
                restaurantData.forEach(spot => {
                    if(!spot.map) return;
                    const marker = document.createElement('div');
                    marker.className = 'map-marker';
                    marker.style.left = spot.map.x;
                    marker.style.top = spot.map.y;
                    marker.dataset.id = spot.id;
                    marker.innerHTML = `
                        ${spot.icon}
                        <div class="map-marker-label">${spot.name}</div>
                    `;
                    marker.addEventListener('click', () => openModal(spot.id));
                    container.appendChild(marker);
                });
            };

            let categoryChartInstance, regionChartInstance;
            const renderCharts = () => {
                const categoryCounts = restaurantData.reduce((acc, r) => { acc[r.category] = (acc[r.category] || 0) + 1; return acc; }, {});
                const regionCounts = restaurantData.reduce((acc, r) => { acc[r.region] = (acc[r.region] || 0) + 1; return acc; }, {});

                const chartColors = ['#B08968', '#DDB892', '#E6CCB2', '#EDE0D4', '#7F5539'];
                if (categoryChartInstance) categoryChartInstance.destroy();
                categoryChartInstance = new Chart(document.getElementById('categoryChart'), {
                    type: 'pie',
                    data: {
                        labels: Object.keys(categoryCounts),
                        datasets: [{ data: Object.values(categoryCounts), backgroundColor: chartColors }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top' } } }
                });

                if (regionChartInstance) regionChartInstance.destroy();
                regionChartInstance = new Chart(document.getElementById('regionChart'), {
                    type: 'bar',
                    data: {
                        labels: Object.keys(regionCounts),
                        datasets: [{ label: '맛집 수', data: Object.values(regionCounts), backgroundColor: chartColors[0] }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, ticks: { stepSize: 1 } } } }
                });
            };

            document.querySelectorAll('.nav-item').forEach(item => item.addEventListener('click', () => switchView(item.dataset.view)));
            document.querySelectorAll('.filter-btn.category-btn').forEach(btn => btn.addEventListener('click', () => {
                document.querySelector('.filter-btn.category-btn.active').classList.remove('active');
                btn.classList.add('active');
                appState.filters.category = btn.dataset.category;
                renderCards();
            }));
            document.getElementById('modal-close-btn').addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => e.target === modal && closeModal());

            renderCards();
        });
    </script>
</body>
</html>
